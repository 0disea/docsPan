{
  "openapi": "3.1.0",
  "info": {
    "title": "Pan API",
    "description": "Pan API simplifies digital asset management and DeFi operations. Build sophisticated DeFi features without deep blockchain knowledge.",
    "version": "1.0.0",
    "contact": {
      "name": "Pan Support",
      "email": "support@pan.dev",
      "url": "https://pan.dev"
    },
    "license": {
      "name": "Proprietary"
    }
  },
  "servers": [
    {
      "url": "https://api.pan.dev/v1",
      "description": "Production server"
    },
    {
      "url": "https://api-staging.pan.dev/v1",
      "description": "Staging server"
    }
  ],
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "tags": [
    {
      "name": "Wallets",
      "description": "Create and manage multi-chain wallets"
    },
    {
      "name": "Balances",
      "description": "Query wallet balances across all chains"
    },
    {
      "name": "Intents",
      "description": "Create and monitor intent-based DeFi operations"
    }
  ],
  "paths": {
    "/wallets": {
      "post": {
        "tags": ["Wallets"],
        "summary": "Create a wallet",
        "description": "Creates a new multi-chain wallet for a user in your application. Each wallet supports all available blockchains with a single address.",
        "operationId": "createWallet",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateWalletRequest"
              },
              "examples": {
                "basic": {
                  "summary": "Basic wallet creation",
                  "value": {
                    "userId": "user_123",
                    "metadata": {
                      "app": "my-app"
                    }
                  }
                },
                "with-metadata": {
                  "summary": "Wallet with metadata",
                  "value": {
                    "userId": "user_123",
                    "metadata": {
                      "email": "user@example.com",
                      "name": "John Doe",
                      "app": "my-app"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Wallet created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Wallet"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "validation": {
                    "value": {
                      "error": "VALIDATION_ERROR",
                      "message": "userId is required"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Wallet limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "limit-exceeded": {
                    "value": {
                      "error": "WALLET_LIMIT_EXCEEDED",
                      "message": "You have reached your wallet limit of 100. Upgrade your plan to create more wallets.",
                      "currentUsage": 100,
                      "limit": 100
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/wallets/{userId}": {
      "get": {
        "tags": ["Wallets"],
        "summary": "Get wallet by user ID",
        "description": "Retrieves wallet information using the user ID that was provided during wallet creation.",
        "operationId": "getWalletByUserId",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "description": "The user ID associated with the wallet",
            "schema": {
              "type": "string",
              "minLength": 1,
              "maxLength": 255
            },
            "examples": {
              "basic": {
                "value": "user_123"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Wallet found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Wallet"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Wallet not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "not-found": {
                    "value": {
                      "error": "NOT_FOUND",
                      "message": "Wallet not found for user ID: user_123"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/balances/{walletId}": {
      "get": {
        "tags": ["Balances"],
        "summary": "Get wallet balances",
        "description": "Retrieves all token balances for a wallet across all supported blockchains. Includes USD values when available.",
        "operationId": "getBalances",
        "parameters": [
          {
            "name": "walletId",
            "in": "path",
            "required": true,
            "description": "The wallet ID",
            "schema": {
              "type": "string"
            },
            "examples": {
              "basic": {
                "value": "wallet_abc123"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Balance information retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BalanceResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Wallet not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
                }
              }
            }
          }
        }
      },
    "/intents": {
      "post": {
        "tags": ["Intents"],
        "summary": "Create an intent",
        "description": "Creates a new intent and initiates automatic planning and execution. The intent will be processed asynchronously.",
        "operationId": "createIntent",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateIntentRequest"
              },
              "examples": {
                "lend": {
                  "summary": "Lend USDC",
                  "value": {
                    "walletId": "wallet_abc123",
                    "action": "lend",
                    "amount": "1000",
                    "asset": "USDC",
                    "chain": "ethereum-sepolia"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Intent created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Intent"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "validation": {
                    "value": {
                      "error": "VALIDATION_ERROR",
                      "message": "walletId, action, and amount are required"
                    }
                  },
                  "unsupported-action": {
                    "value": {
                      "error": "UNSUPPORTED_ACTION",
                      "message": "Action 'swap' is not supported in API v1. Supported actions: lend"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Wallet not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/intents/{intentId}": {
      "get": {
        "tags": ["Intents"],
        "summary": "Get intent details",
        "description": "Retrieves complete information about an intent, including its current status, execution plan, and results.",
        "operationId": "getIntent",
        "parameters": [
          {
            "name": "intentId",
            "in": "path",
            "required": true,
            "description": "The intent ID",
            "schema": {
              "type": "string"
            },
            "examples": {
              "basic": {
                "value": "intent_xyz789"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Intent found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Intent"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Intent not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "CreateWalletRequest": {
        "type": "object",
        "required": ["userId"],
        "properties": {
          "userId": {
            "type": "string",
            "description": "Unique identifier for the user in your application",
            "minLength": 1,
            "maxLength": 255,
            "example": "user_123"
          },
          "metadata": {
            "type": "object",
            "description": "Optional metadata to store with the wallet",
            "additionalProperties": {
              "type": "string"
            },
            "example": {
              "email": "user@example.com",
              "app": "my-app"
            }
          }
        }
      },
      "Wallet": {
        "type": "object",
        "required": ["id", "userId", "address", "chains", "createdAt"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique wallet identifier",
            "example": "wallet_abc123"
          },
          "userId": {
            "type": "string",
            "description": "User ID associated with this wallet",
            "example": "user_123"
          },
          "address": {
            "type": "string",
            "description": "Blockchain address (works across all supported chains)",
            "pattern": "^0x[a-fA-F0-9]{40}$",
            "example": "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb"
          },
          "chains": {
            "type": "array",
            "description": "List of supported blockchains",
            "items": {
              "type": "string",
              "enum": ["ethereum-sepolia", "base-sepolia", "arbitrum-sepolia"]
            },
            "example": ["ethereum-sepolia", "base-sepolia", "arbitrum-sepolia"]
          },
          "metadata": {
            "type": "object",
            "description": "Metadata associated with the wallet",
            "additionalProperties": {
              "type": "string"
            }
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "ISO 8601 timestamp of wallet creation",
            "example": "2024-01-15T10:30:00Z"
          }
        }
      },
      "BalanceResponse": {
        "type": "object",
        "required": ["walletId", "balances", "updatedAt"],
        "properties": {
          "walletId": {
            "type": "string",
            "description": "Wallet ID",
            "example": "wallet_abc123"
          },
          "balances": {
            "type": "object",
            "description": "Balances organized by chain",
            "additionalProperties": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/TokenBalance"
              }
            },
            "example": {
              "ethereum-sepolia": [
                {
                  "symbol": "USDC",
                  "balance": "1000000000",
                  "balanceFormatted": "1000.0",
                  "decimals": 6,
                  "usdValue": 1000.0
                }
              ]
            }
          },
          "totalUsdValue": {
            "type": "number",
            "description": "Total USD value across all chains and tokens",
            "example": 1000.0
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "ISO 8601 timestamp of last balance update",
            "example": "2024-01-15T10:35:00Z"
          }
        }
      },
      "TokenBalance": {
        "type": "object",
        "required": ["symbol", "balance", "balanceFormatted", "decimals"],
        "properties": {
          "symbol": {
            "type": "string",
            "description": "Token symbol (e.g., USDC, WETH)",
            "example": "USDC"
          },
          "balance": {
            "type": "string",
            "description": "Raw balance (without decimals)",
            "example": "1000000000"
          },
          "balanceFormatted": {
            "type": "string",
            "description": "Human-readable balance with decimals applied",
            "example": "1000.0"
          },
          "decimals": {
            "type": "integer",
            "description": "Number of decimals for this token",
            "example": 6
          },
          "usdValue": {
            "type": "number",
            "description": "USD value of this token balance (when available)",
            "example": 1000.0
          }
        }
      },
      "CreateIntentRequest": {
        "type": "object",
        "required": ["walletId", "action", "amount"],
        "properties": {
          "walletId": {
            "type": "string",
            "description": "Wallet ID to execute the intent with",
            "example": "wallet_abc123"
          },
          "action": {
            "type": "string",
            "enum": ["lend"],
            "description": "Type of intent to execute",
            "example": "lend"
          },
          "amount": {
            "type": "string",
            "description": "Amount to deposit (in token units, e.g., '1000' for 1000 USDC)",
            "pattern": "^[0-9]+\\.?[0-9]*$",
            "example": "1000"
          },
          "asset": {
            "type": "string",
            "description": "Token symbol to deposit",
            "enum": ["USDC", "USDT", "DAI", "WETH"],
            "example": "USDC"
          },
          "chain": {
            "type": "string",
            "enum": ["ethereum-sepolia", "base-sepolia", "arbitrum-sepolia"],
            "description": "Target blockchain for the deposit",
            "example": "ethereum-sepolia"
          }
        }
      },
      "Intent": {
        "type": "object",
        "required": ["id", "walletId", "status", "action", "createdAt"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique intent identifier",
            "example": "intent_xyz789"
          },
          "walletId": {
            "type": "string",
            "description": "Wallet ID associated with this intent",
            "example": "wallet_abc123"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "planning", "executing", "completed", "failed"],
            "description": "Current status of the intent",
            "example": "executing"
          },
          "action": {
            "type": "string",
            "enum": ["lend"],
            "description": "Type of intent",
            "example": "lend"
          },
          "amount": {
            "type": "string",
            "description": "Amount specified in the intent",
            "example": "1000"
          },
          "asset": {
            "type": "string",
            "description": "Asset specified in the intent",
            "example": "USDC"
          },
          "chain": {
            "type": "string",
            "description": "Chain specified in the intent",
            "example": "ethereum-sepolia"
          },
          "executionPlan": {
            "$ref": "#/components/schemas/ExecutionPlan"
          },
          "error": {
            "$ref": "#/components/schemas/IntentError"
          },
          "metrics": {
            "$ref": "#/components/schemas/IntentMetrics"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "ISO 8601 timestamp of intent creation",
            "example": "2024-01-15T10:30:00Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "ISO 8601 timestamp of last update",
            "example": "2024-01-15T10:32:00Z"
          },
          "completedAt": {
            "type": "string",
            "format": "date-time",
            "description": "ISO 8601 timestamp of completion (if completed)",
            "example": "2024-01-15T10:35:00Z"
          }
        }
      },
      "ExecutionPlan": {
        "type": "object",
        "properties": {
          "steps": {
            "type": "array",
            "description": "Ordered list of execution steps",
            "items": {
              "$ref": "#/components/schemas/ExecutionStep"
            }
          },
          "estimatedGas": {
            "type": "string",
            "description": "Estimated total gas cost",
            "example": "0.05 ETH"
          },
          "estimatedCostUsd": {
            "type": "string",
            "description": "Estimated total cost in USD",
            "example": "15.00"
          },
          "estimatedTime": {
            "type": "string",
            "description": "Estimated execution time",
            "example": "2-5 minutes"
          },
          "strategy": {
            "type": "string",
            "enum": ["simple", "swap", "bridge", "multi-asset"],
            "description": "Planning strategy used",
            "example": "multi-asset"
          }
        }
      },
      "ExecutionStep": {
        "type": "object",
        "required": ["type"],
        "properties": {
          "type": {
            "type": "string",
            "enum": ["swap", "bridge", "consolidate", "deposit"],
            "description": "Type of execution step",
            "example": "swap"
          },
          "from": {
            "type": "string",
            "description": "Source asset or chain (depending on step type)",
            "example": "USDT"
          },
          "to": {
            "type": "string",
            "description": "Target asset or chain (depending on step type)",
            "example": "USDC"
          },
          "amount": {
            "type": "string",
            "description": "Amount for this step",
            "example": "500"
          },
          "chain": {
            "type": "string",
            "description": "Blockchain for this step",
            "example": "ethereum-sepolia"
          }
        }
      },
      "IntentError": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "Error code",
            "example": "INSUFFICIENT_FUNDS"
          },
          "message": {
            "type": "string",
            "description": "Human-readable error message",
            "example": "Wallet does not have sufficient USDC to complete the operation"
          },
          "details": {
            "type": "object",
            "description": "Additional error details",
            "additionalProperties": true
          }
        }
      },
      "IntentMetrics": {
        "type": "object",
        "properties": {
          "totalGas": {
            "type": "string",
            "description": "Total gas used across all transactions",
            "example": "0.05 ETH"
          },
          "totalCostUsd": {
            "type": "number",
            "description": "Total cost in USD",
            "example": 15.0
          },
          "transactions": {
            "type": "array",
            "description": "List of transaction hashes",
            "items": {
              "type": "string"
            },
            "example": ["0x123...", "0x456..."]
          }
        }
      },
      "Error": {
        "type": "object",
        "required": ["error", "message"],
        "properties": {
          "error": {
            "type": "string",
            "description": "Error code",
            "example": "UNAUTHORIZED"
          },
          "message": {
            "type": "string",
            "description": "Human-readable error message",
            "example": "Invalid or missing API key"
          },
          "currentUsage": {
            "type": "integer",
            "description": "Current usage (for limit errors)",
            "example": 100
          },
          "limit": {
            "type": "integer",
            "description": "Limit value (for limit errors)",
            "example": 100
          }
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "API Key",
        "description": "API key authentication. Include your API key in the Authorization header as: `Bearer YOUR_API_KEY`"
      }
    }
  }
}
