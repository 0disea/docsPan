---
title: "Intents"
description: "Understand how intent-based execution works in Pan"
---

Intents represent high-level financial goals rather than specific transactions. Instead of specifying exactly what transactions to execute, you express what you want to achieve, and Pan's intelligent system determines the best way to accomplish it.

## What is an intent?

An intent is a declarative statement of a financial objective. When you create an intent, you tell Pan **what** you want to achieve, not **how** to achieve it. Pan's system then:

1. Analyzes the current wallet state
2. Evaluates available DeFi protocols and opportunities
3. Generates an optimized execution plan
4. Executes the plan automatically

<Card
  title="Express goals, not transactions"
  icon="target"
>
  Say "lend $1000 USDC" instead of "swap, bridge, consolidate, then deposit"
</Card>

## Creating an intent

Here's a simple example of creating a lending intent:

<CodeGroup>
```bash cURL
curl -X POST https://api.pan.dev/v1/intents \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "walletId": "wallet_abc123",
    "action": "lend",
    "amount": "1000",
    "asset": "USDC",
    "chain": "ethereum-sepolia"
  }'
```

```javascript JavaScript
const intent = await createIntent({
  walletId: 'wallet_abc123',
  action: 'lend',
  amount: '1000',
  asset: 'USDC',
  chain: 'ethereum-sepolia'
});
```
</CodeGroup>

<ResponseExample>
```json Intent created
{
  "id": "intent_xyz789",
  "walletId": "wallet_abc123",
  "status": "pending",
  "action": "lend",
  "amount": "1000",
  "asset": "USDC",
  "chain": "ethereum-sepolia",
  "createdAt": "2024-01-15T10:30:00Z"
}
```
</ResponseExample>

## Intent lifecycle

Intents progress through a well-defined lifecycle with clear states:

<Steps>
  <Step title="Pending">
    The intent has been created and registered in the system, but processing hasn't started yet. This state is typically very brief.
  </Step>
  
  <Step title="Planning">
    Pan is analyzing the wallet state, evaluating protocols, and generating the optimal execution plan. This may take several seconds depending on complexity.
  </Step>
  
  <Step title="Executing">
    Pan is executing the transactions on blockchain. This phase can take from seconds to minutes depending on network congestion and the number of transactions required.
  </Step>
  
  <Step title="Completed">
    All operations completed successfully. Transactions are confirmed on blockchain, and assets have moved as planned. This is the desired final state.
  </Step>
  
  <Step title="Failed">
    Something went wrong during execution. The system provides detailed error information to help diagnose the issue. You can review the error and retry if appropriate.
  </Step>
</Steps>

## Intent types

Currently, Pan supports one intent type in MVP:

### Lend

Deposits funds into a DeFi lending protocol (like Aave, Compound, or Morpho) to earn interest:

```json
{
  "action": "lend",
  "amount": "1000",
  "asset": "USDC",
  "chain": "ethereum-sepolia"
}
```

<Note>
  More intent types are coming soon: direct swaps, bridges, and more complex DeFi operations.
</Note>

## Execution planning

When you create an intent, Pan doesn't execute immediately. Instead, it goes through a sophisticated planning phase:

<AccordionGroup>
  <Accordion title="State analysis">
    Pan analyzes the wallet's current state: what assets are available, on which chains, and in what quantities. This includes querying balances across all supported chains and tokens.
  </Accordion>
  
  <Accordion title="Protocol evaluation">
    The system evaluates available DeFi protocols, considering factors like:
    - Interest rates
    - Liquidity available
    - Transaction costs
    - Protocol reputation and security
  </Accordion>
  
  <Accordion title="Route optimization">
    Pan generates an execution plan that may include:
    - Swaps (converting between tokens)
    - Bridges (moving assets between chains)
    - Consolidation (gathering scattered assets)
    - Deposits (final action to achieve the intent)
  </Accordion>
  
  <Accordion title="Cost estimation">
    The system estimates total gas costs, slippage, and execution time before proceeding. This helps ensure the operation is economically viable.
  </Accordion>
</AccordionGroup>

## Monitoring intent status

Since intent execution is asynchronous, you'll need to poll the intent status to track progress:

<CodeGroup>
```bash cURL
curl -X GET https://api.pan.dev/v1/intents/intent_xyz789 \
  -H "Authorization: Bearer YOUR_API_KEY"
```

```javascript JavaScript
// Poll every 5 seconds
const checkStatus = async () => {
  const intent = await getIntent('intent_xyz789');
  console.log(`Status: ${intent.status}`);
  
  if (intent.status === 'completed' || intent.status === 'failed') {
    return intent;
  }
  
  // Wait and check again
  await new Promise(resolve => setTimeout(resolve, 5000));
  return checkStatus();
};
```
</CodeGroup>

<ResponseExample>
```json Intent with full details
{
  "id": "intent_xyz789",
  "walletId": "wallet_abc123",
  "status": "executing",
  "action": "lend",
  "amount": "1000",
  "asset": "USDC",
  "chain": "ethereum-sepolia",
  "executionPlan": {
    "steps": [
      {
        "type": "swap",
        "from": "USDT",
        "to": "USDC",
        "amount": "500",
        "chain": "base-sepolia"
      },
      {
        "type": "bridge",
        "from": "base-sepolia",
        "to": "ethereum-sepolia",
        "asset": "USDC",
        "amount": "500"
      },
      {
        "type": "deposit",
        "protocol": "aave",
        "asset": "USDC",
        "amount": "1000",
        "chain": "ethereum-sepolia"
      }
    ],
    "estimatedGas": "0.05",
    "estimatedCostUsd": "15.00",
    "estimatedTime": "2-5 minutes"
  },
  "createdAt": "2024-01-15T10:30:00Z",
  "updatedAt": "2024-01-15T10:32:00Z"
}
```
</ResponseExample>

## Error handling

When an intent fails, Pan provides detailed error information:

<ResponseExample>
```json Failed intent
{
  "id": "intent_xyz789",
  "status": "failed",
  "error": {
    "code": "INSUFFICIENT_FUNDS",
    "message": "Wallet does not have sufficient USDC to complete the operation",
    "details": {
      "required": "1000 USDC",
      "available": "750 USDC",
      "shortfall": "250 USDC"
    }
  },
  "executionPlan": {
    "steps": [...],
    "completedSteps": 2,
    "failedStep": 3
  }
}
```
</ResponseExample>

## Best practices

<Tip>
  **Poll strategically**: Use a polling interval of 5-10 seconds for checking intent status. More frequent polling wastes resources; less frequent polling reduces responsiveness.
</Tip>

<Tip>
  **Handle failures gracefully**: Always check for the `failed` status and provide clear error messages to users. Some failures may be recoverable.
</Tip>

<Tip>
  **Show progress**: Display the execution plan to users so they understand what's happening. This improves transparency and user trust.
</Tip>

## Related guides

<CardGroup cols={2}>
  <Card
    title="Executing intents"
    icon="target"
    href="/guides/executing-intents"
  >
    Step-by-step guide to creating and managing intents
  </Card>
  <Card
    title="Monitoring status"
    icon="chart-line"
    href="/guides/monitoring-status"
  >
    Learn how to track intent execution progress
  </Card>
  <Card
    title="Execution plans"
    icon="route"
    href="/guides/concepts/execution-plans"
  >
    Deep dive into how Pan plans execution
  </Card>
  <Card
    title="Error handling"
    icon="exclamation-triangle"
    href="/guides/best-practices/error-handling"
  >
    Best practices for handling errors and edge cases
  </Card>
</CardGroup>

